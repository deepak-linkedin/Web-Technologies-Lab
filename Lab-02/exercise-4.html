<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Management</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
        }

        form {
            margin-bottom: 20px;
        }

        input {
            display: block;
            margin: 8px 0;
            padding: 6px;
            width: 250px;
        }

        button {
            padding: 6px 10px;
            margin-top: 10px;
        }

        table {
            border-collapse: collapse;
            width: 100%;
            margin-top: 20px;
        }

        table, th, td {
            border: 1px solid black;
        }

        th, td {
            padding: 8px;
            text-align: center;
        }
    </style>
</head>
<body>
    <h2>User Registration</h2>
    <form onsubmit="registerUser(event)">
        <input type="text" id="name" placeholder="Name">
        <input type="email" id="email" placeholder="Email">
        <input type="text" id="mobile" placeholder="Mobile Number">
        <input type="password" id="password" placeholder="Password">
        <button type="submit">Register</button>
    </form>

    <button onclick="clearAllUsers()">Clear All Users</button>

    <h2>Registered Users</h2>

    <table>
        <thead>
            <tr>
                <th>Name</th>
                <th>Email</th>
                <th>Mobile</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody id="userTable"></tbody>
    </table>

    <script>
        function registerUser(event){
            event.preventDefault();

            var name = document.getElementById("name").value;
            var email = document.getElementById("email").value;
            var mobile = document.getElementById("mobile").value;
            var password = document.getElementById("password").value;

            if(!name || !email || !mobile || !password){
                alert("All ields are mandatory");
                return;
            }

            if(mobile.length!=10 || isNaN(mobile)){
                alert("Mobile number must be 10 digits");
                return;
            }

            if(password.length<6){
                alert("Password must be atleast 6 characters");
                return;
            }

            var users = JSON.parse(localStorage.getItem("users")) || [];

            //duplicate mail
            for(var i=0;i<users.length;i++){
                if(users[i].email === email){
                    alert("Email already registered");
                    return;
                }
            }
            var user = {
                name : name,
                email: email,
                mobile: mobile,
                password: password
            };

            users.push(user);
            localStorage.setItem("users",JSON.stringify(users));

            document.querySelector("form").reset();

            displayUsers();
        }
        function displayUsers() {
            var users = JSON.parse(localStorage.getItem("users"))||[];
            var table = document.getElementById("userTable");
            table.innerHTML = "";

            users.forEach(function (user,index){
                var row = table.insertRow();

                row.insertCell(0).innerText = user.name;
                row.insertCell(1).innerText = user.email;
                row.insertCell(2).innerText = user.mobile;

                var deleteCell = row.insertCell(3);
                var btn = document.createElement("button");
                btn.innerText = "Delete";
                btn.onclick = function() {
                    deleteUser(index);
                };
                deleteCell.appendChild(btn);
            });
        }
        function deleteUser(index) {
            var users = JSON.parse(localStorage.getItem("users"));
            users.splice(index,1);
            localStorage.setItem("users",JSON.stringify(users));
            displayUsers();
        }
        function clearAllUsers() {
            localStorage.removeItem("users");
            displayUsers();
        }

        displayUsers();
    </script>
</body>
</html>